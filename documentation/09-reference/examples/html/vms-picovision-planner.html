<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PicoVision Route Planning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333333;
            line-height: 1.6;
            min-width: 1200px;
        }
        
        /* Navigation Bar */
        .navbar {
            height: 60px;
            background: #006dfe;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            padding: 0 20px;
        }
        
        .navbar-content {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar h1 {
            color: white;
            font-size: 20px;
            font-weight: 600;
        }
        
        .navbar-actions {
            display: flex;
            gap: 15px;
            align-items: center;
            color: white;
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }
        
        /* Route Header Card */
        .route-header {
            background: white;
            border-radius: 8px;
            padding: 20px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        
        .route-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .route-name {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            border-bottom: 2px solid #006dfe;
            padding-bottom: 8px;
        }
        
        .route-info {
            display: flex;
            gap: 30px;
            font-size: 14px;
            color: #555;
        }
        
        .route-info-item {
            display: flex;
            flex-direction: column;
        }
        
        .route-info-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
        }
        
        .route-info-value {
            font-weight: 600;
            color: #333;
        }
        
        /* Performance Metrics */
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e1e5e8;
            text-align: center;
        }
        
        .metric-icon {
            width: 40px;
            height: 40px;
            background: #e7f3ff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 20px;
        }
        
        .metric-value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin: 5px 0;
        }
        
        .metric-label {
            font-size: 12px;
            color: #555;
            text-transform: uppercase;
        }
        
        .metric-sublabel {
            font-size: 11px;
            color: #999;
            margin-top: 4px;
        }
        
        /* Action Bar */
        .action-bar {
            background: white;
            border-radius: 8px;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn-primary {
            background: #006dfe;
            color: white;
            border: 1px solid #006dfe;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .btn-primary:hover {
            background: #0056d3;
        }
        
        .btn-secondary {
            background: white;
            color: #333;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .btn-secondary:hover {
            background: #f5f5f5;
        }
        
        .selection-info {
            display: flex;
            align-items: center;
            gap: 20px;
            color: #555;
            font-size: 14px;
        }
        
        .selection-count {
            background: #e7f3ff;
            color: #006dfe;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        /* Device List Container */
        .device-list-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .list-header {
            padding: 15px 30px;
            border-bottom: 1px solid #e1e5e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .list-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .filter-controls {
            display: flex;
            gap: 10px;
        }
        
        .filter-select {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            font-size: 14px;
        }
        
        .search-box {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            width: 200px;
        }
        
        /* Device Item */
        .device-item {
            border-bottom: 1px solid #eee;
        }
        
        .device-header {
            padding: 20px 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s ease;
            background: #e7f3ff;
        }
        
        .device-header:hover {
            background: #deedff;
        }
        
        .device-header.selected {
            background: #deedff;
        }
        
        .device-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 20px;
            cursor: pointer;
        }
        
        .device-main-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .device-id {
            font-weight: 700;
            color: #333;
            font-size: 16px;
            min-width: 60px;
        }
        
        .device-location {
            flex: 1;
        }
        
        .device-name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }
        
        .location-name {
            font-size: 14px;
            color: #555;
        }
        
        /* Device Metrics */
        .device-metrics {
            display: flex;
            gap: 30px;
            align-items: center;
            margin-right: 20px;
        }
        
        .device-metric {
            text-align: center;
            min-width: 60px;
        }
        
        .device-metric-value {
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }
        
        .device-metric-label {
            font-size: 11px;
            color: #999;
            text-transform: uppercase;
            margin-top: 2px;
        }
        
        /* Cabinet Summary */
        .cabinet-summary {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .cabinet-count {
            background: #f5f5f5;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            color: #555;
            font-weight: 500;
        }
        
        .service-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .service-critical {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .service-warning {
            background: #fff8dc;
            color: #856404;
            border: 1px solid #ffeeba;
        }
        
        .service-good {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .expand-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.2s ease;
            font-size: 16px;
        }
        
        .expand-icon.expanded {
            transform: rotate(90deg);
        }
        
        /* DRI Color Coding */
        .dri-critical {
            color: #dc3545;
            font-weight: 700;
        }
        
        .dri-warning {
            color: #ffc107;
            font-weight: 700;
        }
        
        .dri-good {
            color: #28a745;
            font-weight: 700;
        }
        
        /* Cabinet Details */
        .cabinet-details {
            background: #f8f9fa;
            border-top: 1px solid #e1e5e8;
            display: none;
        }
        
        .cabinet-details.expanded {
            display: block;
        }
        
        .cabinet-grid {
            padding: 20px 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 15px;
        }
        
        .cabinet-card {
            background: white;
            border: 1px solid #e1e5e8;
            border-radius: 6px;
            padding: 15px;
        }
        
        .cabinet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .cabinet-title {
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cabinet-type {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            background: #e7f3ff;
            color: #006dfe;
        }
        
        .cabinet-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            font-size: 13px;
        }
        
        .cabinet-metric {
            text-align: center;
        }
        
        .cabinet-metric-value {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }
        
        .cabinet-metric-label {
            font-size: 11px;
            color: #999;
            text-transform: uppercase;
            margin-top: 2px;
        }
        
        .service-checkbox {
            width: 18px;
            height: 18px;
        }
        
        /* Summary Footer */
        .list-footer {
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 2px solid #e1e5e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-metrics {
            display: flex;
            gap: 30px;
        }
        
        .footer-metric {
            display: flex;
            flex-direction: column;
        }
        
        .footer-metric-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
        }
        
        .footer-metric-value {
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }
        
        /* Star icon for parent cabinet */
        .parent-indicator {
            color: #ffc107;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-content">
            <h1>PicoVision Route Planning</h1>
            <div class="navbar-actions">
                <span>Service Date: July 8, 2025</span>
                <span>|</span>
                <span>Route Supervisor: John Smith</span>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <!-- Route Header -->
        <div class="route-header">
            <div class="route-title">
                <h2 class="route-name">Route 1 - Downtown Circuit</h2>
                <div class="route-info">
                    <div class="route-info-item">
                        <span class="route-info-label">Driver</span>
                        <span class="route-info-value">Andrew Soloman</span>
                    </div>
                    <div class="route-info-item">
                        <span class="route-info-label">Truck</span>
                        <span class="route-info-value">Truck 179</span>
                    </div>
                    <div class="route-info-item">
                        <span class="route-info-label">Warehouse</span>
                        <span class="route-info-value">Main Warehouse</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Performance Metrics -->
        <div class="performance-metrics">
            <div class="metric-card">
                <div class="metric-icon">📱</div>
                <div class="metric-value">8/24</div>
                <div class="metric-label">Devices Selected</div>
                <div class="metric-sublabel">33.3% of route</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">📦</div>
                <div class="metric-value">18/67</div>
                <div class="metric-label">Cabinets to Service</div>
                <div class="metric-sublabel">26.9% of total</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">💰</div>
                <div class="metric-value">$1,847</div>
                <div class="metric-label">Total Collection</div>
                <div class="metric-sublabel">Est. for selected</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">⚠️</div>
                <div class="metric-value">12</div>
                <div class="metric-label">Total Sold Out</div>
                <div class="metric-sublabel">Across all devices</div>
            </div>
            <div class="metric-card">
                <div class="metric-icon">⏱️</div>
                <div class="metric-value">5.2 hrs</div>
                <div class="metric-label">Est. Route Time</div>
                <div class="metric-sublabel">52 miles total</div>
            </div>
        </div>
        
        <!-- Action Bar -->
        <div class="action-bar">
            <div class="selection-info">
                <label style="display: flex; align-items: center; gap: 8px;">
                    <input type="checkbox" id="selectAll">
                    <span>Select All</span>
                </label>
                <span class="selection-count">8 devices selected</span>
                <span>18 cabinets to service</span>
            </div>
            <div class="action-buttons">
                <button class="btn-secondary">Clear Selection</button>
                <button class="btn-primary">Finalize Route</button>
            </div>
        </div>
        
        <!-- Device List -->
        <div class="device-list-container">
            <div class="list-header">
                <h3 class="list-title">PicoVision Devices</h3>
                <div class="filter-controls">
                    <select class="filter-select">
                        <option>All Service Status</option>
                        <option>Critical Only</option>
                        <option>Warning Only</option>
                        <option>All Need Service</option>
                    </select>
                    <input type="search" class="search-box" placeholder="Search locations...">
                </div>
            </div>
            
            <!-- Device 1 -->
            <div class="device-item">
                <div class="device-header selected">
                    <input type="checkbox" class="device-checkbox" checked>
                    <div class="device-main-info">
                        <div class="device-id">#469</div>
                        <div class="device-location">
                            <div class="device-name">Main Entrance PicoVision</div>
                            <div class="location-name">Tulsa Welding School</div>
                        </div>
                    </div>
                    <div class="device-metrics">
                        <div class="device-metric">
                            <div class="device-metric-value">3</div>
                            <div class="device-metric-label">SO</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value dri-critical">0</div>
                            <div class="device-metric-label">DRI</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">45.2</div>
                            <div class="device-metric-label">DCR</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">18%</div>
                            <div class="device-metric-label">PL</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">287</div>
                            <div class="device-metric-label">UTP</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">8</div>
                            <div class="device-metric-label">DSL</div>
                        </div>
                    </div>
                    <div class="cabinet-summary">
                        <span class="cabinet-count">3 Cabinets</span>
                        <span class="service-indicator service-critical">
                            2 Critical
                        </span>
                        <span class="expand-icon expanded">▶</span>
                    </div>
                </div>
                <div class="cabinet-details expanded">
                    <div class="cabinet-grid">
                        <div class="cabinet-card">
                            <div class="cabinet-header">
                                <div class="cabinet-title">
                                    <span class="parent-indicator">⭐</span>
                                    Cabinet 1
                                    <span class="cabinet-type">Cooler</span>
                                </div>
                                <input type="checkbox" class="service-checkbox" checked>
                            </div>
                            <div class="cabinet-metrics">
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">2</div>
                                    <div class="cabinet-metric-label">SO</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value dri-critical">0</div>
                                    <div class="cabinet-metric-label">DRI</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">12%</div>
                                    <div class="cabinet-metric-label">PL</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">110</div>
                                    <div class="cabinet-metric-label">UTP</div>
                                </div>
                            </div>
                        </div>
                        <div class="cabinet-card">
                            <div class="cabinet-header">
                                <div class="cabinet-title">
                                    Cabinet 2
                                    <span class="cabinet-type">Freezer</span>
                                </div>
                                <input type="checkbox" class="service-checkbox" checked>
                            </div>
                            <div class="cabinet-metrics">
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">1</div>
                                    <div class="cabinet-metric-label">SO</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value dri-warning">1</div>
                                    <div class="cabinet-metric-label">DRI</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">8%</div>
                                    <div class="cabinet-metric-label">PL</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">92</div>
                                    <div class="cabinet-metric-label">UTP</div>
                                </div>
                            </div>
                        </div>
                        <div class="cabinet-card">
                            <div class="cabinet-header">
                                <div class="cabinet-title">
                                    Cabinet 3
                                    <span class="cabinet-type">Ambient</span>
                                </div>
                                <input type="checkbox" class="service-checkbox">
                            </div>
                            <div class="cabinet-metrics">
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">0</div>
                                    <div class="cabinet-metric-label">SO</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value dri-good">7</div>
                                    <div class="cabinet-metric-label">DRI</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">65%</div>
                                    <div class="cabinet-metric-label">PL</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">85</div>
                                    <div class="cabinet-metric-label">UTP</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Device 2 -->
            <div class="device-item">
                <div class="device-header">
                    <input type="checkbox" class="device-checkbox">
                    <div class="device-main-info">
                        <div class="device-id">#478</div>
                        <div class="device-location">
                            <div class="device-name">Break Room PicoVision</div>
                            <div class="location-name">Best USA Corporate</div>
                        </div>
                    </div>
                    <div class="device-metrics">
                        <div class="device-metric">
                            <div class="device-metric-value">0</div>
                            <div class="device-metric-label">SO</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value dri-good">8</div>
                            <div class="device-metric-label">DRI</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">28.5</div>
                            <div class="device-metric-label">DCR</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">76%</div>
                            <div class="device-metric-label">PL</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">68</div>
                            <div class="device-metric-label">UTP</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">3</div>
                            <div class="device-metric-label">DSL</div>
                        </div>
                    </div>
                    <div class="cabinet-summary">
                        <span class="cabinet-count">2 Cabinets</span>
                        <span class="service-indicator service-good">
                            All OK
                        </span>
                        <span class="expand-icon">▶</span>
                    </div>
                </div>
                <div class="cabinet-details">
                    <div class="cabinet-grid">
                        <div class="cabinet-card">
                            <div class="cabinet-header">
                                <div class="cabinet-title">
                                    <span class="parent-indicator">⭐</span>
                                    Cabinet 1
                                    <span class="cabinet-type">Cooler</span>
                                </div>
                                <input type="checkbox" class="service-checkbox">
                            </div>
                            <div class="cabinet-metrics">
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">0</div>
                                    <div class="cabinet-metric-label">SO</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value dri-good">8</div>
                                    <div class="cabinet-metric-label">DRI</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">72%</div>
                                    <div class="cabinet-metric-label">PL</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">35</div>
                                    <div class="cabinet-metric-label">UTP</div>
                                </div>
                            </div>
                        </div>
                        <div class="cabinet-card">
                            <div class="cabinet-header">
                                <div class="cabinet-title">
                                    Cabinet 2
                                    <span class="cabinet-type">Ambient</span>
                                </div>
                                <input type="checkbox" class="service-checkbox">
                            </div>
                            <div class="cabinet-metrics">
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">0</div>
                                    <div class="cabinet-metric-label">SO</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value dri-good">10</div>
                                    <div class="cabinet-metric-label">DRI</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">80%</div>
                                    <div class="cabinet-metric-label">PL</div>
                                </div>
                                <div class="cabinet-metric">
                                    <div class="cabinet-metric-value">33</div>
                                    <div class="cabinet-metric-label">UTP</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Device 3 -->
            <div class="device-item">
                <div class="device-header selected">
                    <input type="checkbox" class="device-checkbox" checked>
                    <div class="device-main-info">
                        <div class="device-id">#521</div>
                        <div class="device-location">
                            <div class="device-name">Emergency Room PicoVision</div>
                            <div class="location-name">Alvista Medical Center</div>
                        </div>
                    </div>
                    <div class="device-metrics">
                        <div class="device-metric">
                            <div class="device-metric-value">1</div>
                            <div class="device-metric-label">SO</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value dri-warning">2</div>
                            <div class="device-metric-label">DRI</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">67.8</div>
                            <div class="device-metric-label">DCR</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">35%</div>
                            <div class="device-metric-label">PL</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">412</div>
                            <div class="device-metric-label">UTP</div>
                        </div>
                        <div class="device-metric">
                            <div class="device-metric-value">6</div>
                            <div class="device-metric-label">DSL</div>
                        </div>
                    </div>
                    <div class="cabinet-summary">
                        <span class="cabinet-count">3 Cabinets</span>
                        <span class="service-indicator service-warning">
                            1 Warning
                        </span>
                        <span class="expand-icon">▶</span>
                    </div>
                </div>
                <div class="cabinet-details">
                    <!-- Cabinet details would go here -->
                </div>
            </div>
            
            <!-- More devices... -->
            
            <div class="list-footer">
                <div class="footer-metrics">
                    <div class="footer-metric">
                        <span class="footer-metric-label">Total Devices</span>
                        <span class="footer-metric-value">24</span>
                    </div>
                    <div class="footer-metric">
                        <span class="footer-metric-label">Total Cabinets</span>
                        <span class="footer-metric-value">67</span>
                    </div>
                    <div class="footer-metric">
                        <span class="footer-metric-label">Selected Devices</span>
                        <span class="footer-metric-value">8</span>
                    </div>
                    <div class="footer-metric">
                        <span class="footer-metric-label">Cabinets to Service</span>
                        <span class="footer-metric-value">18</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-secondary">Save Draft</button>
                    <button class="btn-primary">Finalize & Send to Driver</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Handle device expansion
        document.querySelectorAll('.device-header').forEach(header => {
            header.addEventListener('click', function(e) {
                // Don't expand if clicking checkbox
                if (e.target.type === 'checkbox') return;
                
                const deviceItem = this.closest('.device-item');
                const details = deviceItem.querySelector('.cabinet-details');
                const expandIcon = this.querySelector('.expand-icon');
                
                details.classList.toggle('expanded');
                expandIcon.classList.toggle('expanded');
            });
        });
        
        // Handle device selection
        document.querySelectorAll('.device-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const header = this.closest('.device-header');
                const cabinetCheckboxes = this.closest('.device-item').querySelectorAll('.service-checkbox');
                
                if (this.checked) {
                    header.classList.add('selected');
                    // Auto-select cabinets with critical/warning DRI
                    cabinetCheckboxes.forEach((cb, index) => {
                        const card = cb.closest('.cabinet-card');
                        const driElement = card.querySelector('.cabinet-metric:nth-child(2) .cabinet-metric-value');
                        const driValue = parseInt(driElement.textContent);
                        if (driValue <= 3) {
                            cb.checked = true;
                        }
                    });
                } else {
                    header.classList.remove('selected');
                    cabinetCheckboxes.forEach(cb => cb.checked = false);
                }
                
                updateSelectionCount();
            });
        });
        
        // Handle cabinet selection
        document.querySelectorAll('.service-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', updateSelectionCount);
        });
        
        // Handle select all
        document.getElementById('selectAll').addEventListener('change', function() {
            const deviceCheckboxes = document.querySelectorAll('.device-checkbox');
            deviceCheckboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
                checkbox.dispatchEvent(new Event('change'));
            });
        });
        
        function updateSelectionCount() {
            const selectedDevices = document.querySelectorAll('.device-checkbox:checked').length;
            const selectedCabinets = document.querySelectorAll('.service-checkbox:checked').length;
            const totalDevices = document.querySelectorAll('.device-checkbox').length;
            
            document.querySelector('.selection-count').textContent = `${selectedDevices} devices selected`;
            document.querySelector('.selection-info span:nth-child(3)').textContent = `${selectedCabinets} cabinets to service`;
            
            // Update metrics
            document.querySelector('.metric-card:first-child .metric-value').textContent = `${selectedDevices}/${totalDevices}`;
            document.querySelector('.metric-card:nth-child(2) .metric-value').textContent = `${selectedCabinets}/67`;
        }
        
        // Initialize
        updateSelectionCount();
    </script>
</body>
</html>